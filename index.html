<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Supabase Integration</title>
    <!-- Подключаем клиентскую библиотеку Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script type="text/javascript">
        // !!! ВАЖНО: ЗАМЕНИТЕ ЭТИ ЗНАЧЕНИЯ НА СВОИ !!!
        const supabaseUrl = 'https://ihydjzxctlguvflswzhg.supabase.co'; // Ваш Project URL
        const supabaseAnonKey = 'sb_publishable_9NXa4FwnnrICXnXmrOVqRg_KB5LHkmk'; // Ваш anon/public key

        // Создаем клиент Supabase
        const supabaseClient = supabase.createClient(supabaseUrl, supabaseAnonKey);

        // Функция для отправки тестовых данных
        async function logVisit() {
            const { data, error } = await supabaseClient
                .from('test_data') // Имя вашей таблицы
                .insert([
                    { 
                        some_text: 'Page visited from GitHub repo', 
                        user_ip: null // Supabase может получить IP автоматически через контекст, если настроить триггер
                    }
                ]);

            if (error) {
                console.error('Error inserting data:', error);
                document.getElementById('status').innerHTML = `<p style="color:red;">Error: ${error.message}</p>`;
            } else {
                console.log('Data inserted successfully:', data);
                document.getElementById('status').innerHTML = `<p style="color:green;">✅ Test data saved to Supabase successfully! Check your Table Editor.</p>`;
            }
        }

        // Вызываем функцию при загрузке страницы
        window.onload = logVisit;
    </script>
</head>
<body>
    <h1>Testing Supabase Connection from GitHub</h1>
    <div id="status">
        <p>Attempting to connect to Supabase...</p>
    </div>
</body>
</html>
